<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        turtle{
            background-image: url(assets/turtle/red/\(state-ready-right\).png);
            background-size: 36px 26px;
            width: 36px;
            height: 26px;
            position: absolute;
            bottom: 0px;
            left: 0px;
        }
        .platform{
            position: absolute;
        }
        #gameContainer {
            position: absolute;
            top: 0px;
            bottom: 0px;
            left: 0px;
            right: 0px;
            background-image: url(assets/backgrounds/sky.png);
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <h1 id="freezeChecker"></h1>
    <turtle id="player"></turtle>
    <turtle id="player2"></turtle>
</div>
<script>    
        const playerDiv = document.getElementById('player');
        const playerDiv2 = document.getElementById('player2');
        let playerFreeze = false;
        let player2Freeze = false;
        let playerFreezePressed = false;
        let player2FreezePressed = false;
        let platformCount = 0;
        const player = {
            x: 300,
            y: 50,
            width: 36,
            height: 26,
            speed: 3,
            velocityY: 0,
            gravity: -0.3,
            jumping: false,
            jumping2: false,
            it: false,
            Powerup:[]
        };
        const player2 = {
            x: 50,
            y: 50,
            width: 36,
            height: 26,
            speed: 3,
            velocityY: 0,
            gravity: -0.3,
            jumping: false,
            jumping2: false,
            it: true,
            Powerup:[]
        };
        let platforms = [
            { x:0,y:0,width:1365,height:20},//This is the ground ***DON"T CHANGE THE ORDER***
            { x:0,y:100,width:200,height:22},
            { x:300,y:500,width:200,height:22},
            { x:500,y:400,width:200,height:22},
            { x:0,y:300,width:200,height:22},
            { x:300,y:300,width:200,height:22},
            { x:200,y:200,width:400,height:22},
            { x:900,y:500,width:200,height:22},
            { x:700,y:300,width:500,height:22},
            { x:1000,y:200,width:200,height:22},
            { x:1100,y:400,width:200,height:22},
            { x:1000,y:600,width:200,height:22},
            { x:500,y:600,width:200,height:22},
            { x:800,y:700,width:200,height:22},
            { x:500,y:100,width:200,height:22}
        ];
        const keys = {};
document.addEventListener('keydown', function(e) {
    keys[e.key] = true;
});
document.addEventListener('keyup', function(e) {
    keys[e.key] = false;
});
        function gameLoop() {
    if (keys['ArrowLeft']) {
        player.x -= player.speed;
        playerDiv.style.backgroundImage = `url("assets/turtle/red/(state-ready-left).png")`
    }
    if (keys['ArrowRight']) {
        player.x += player.speed;
        playerDiv.style.backgroundImage = `url("assets/turtle/red/(state-ready-right).png")`
    }
    if (keys['a']||keys['A']) {
        player2.x -= player2.speed;
        playerDiv2.style.backgroundImage = `url("assets/turtle/red/(state-ready-left).png")`
    }
    if (keys['d']||keys['D']) {
        player2.x += player2.speed;
        playerDiv2.style.backgroundImage = `url("assets/turtle/red/(state-ready-right).png")`
    }
    if (keys['ArrowUp'] && player.jumping == false && player.speed != 0) {
            player.jumping = true;
            player.velocityY = 9;
    }
    if((keys['w']|| keys['W']) && player2.jumping == false && player2.speed != 0){
            player2.jumping = true;
            player2.velocityY = 9;
    }
    if(keys['ArrowDown']) {
        if(playerFreeze == false && player2Freeze == false){
        player.speed = 0;
        player2.speed = 0;
        playerDiv.style.backgroundColor = 'rbgb(255, 0, 0, 0.5)';
        playerDiv2.style.backgroundColor = 'rbgb(255, 0, 0, 0.5)';
        player2Freeze = true;
        }else if(playerFreeze == false && player2Freeze == true){
            player.speed = 3;
            player2.speed = 3;
            playerDiv.style.backgroundColor = 'transparent';
            playerDiv2.style.backgroundColor = 'transparent';
            player2Freeze = false;
        }else if(playerFreeze == true && player2Freeze == true){
            player.speed = 3;
            player2.speed = 3;
            playerDiv.style.backgroundColor = 'transparent';
            playerDiv2.style.backgroundColor = 'transparent';
            player2Freeze = false;
        }
        else if(playerFreeze == true && player2Freeze == false){
            player.speed = 0;
            player2.speed = 0;
            playerDiv.style.backgroundColor = 'transparent';
            playerDiv2.style.backgroundColor = 'transparent';
            player2Freeze = true
        }
    }
    if(keys['s']|| keys['S']) {
        if(playerFreeze == false && player2Freeze == false){
        player.speed = 0;
        player2.speed = 0;
        playerDiv.style.backgroundColor = 'rbgb(255, 0, 0, 0.5)';
        playerDiv2.style.backgroundColor = 'rbgb(255, 0, 0, 0.5)';
        playerFreeze = true;
        }else if(playerFreeze == true && player2Freeze == false){
            player.speed = 3;
            player2.speed = 3;
            playerDiv.style.backgroundColor = 'transparent';
            playerDiv2.style.backgroundColor = 'transparent';
            playerFreeze = false;
    }else if(playerFreeze == true && player2Freeze == true){
            player.speed = 0;
            player2.speed = 0;
            playerDiv.style.backgroundColor = 'transparent';
            playerDiv2.style.backgroundColor = 'transparent';
            playerFreeze = false;
        }
        else if(playerFreeze == false && player2Freeze == true){
            player.speed = 0;
            player2.speed = 0;
            playerDiv.style.backgroundColor = 'transparent';
            playerDiv2.style.backgroundColor = 'transparent';
            playerFreeze = true
        }
    }
    document.getElementById('freezeChecker').innerHTML = `Player 1 Freeze: ${playerFreeze}<br> Player 2 Freeze: ${player2Freeze}`;
    platforms.forEach(platform => {
        if (areTouching(player,platform)) {
            if (player.velocityY < 0) {
                player.y = platform.y + platform.height;
                player.velocityY = 0;
                player.jumping = false;
            }
        }
        if (areTouching(player2,platform)) {
            if (player2.velocityY < 0) {
                player2.y = platform.y + platform.height;
                player2.velocityY = 0;
                player2.jumping = false;
            }
        }
    });
    player.velocityY += player.gravity;
    player.y += player.velocityY;
    player2.velocityY += player2.gravity;
    player2.y += player2.velocityY;
    if (player.x < 0) {
        player.x = 0;
    }
    if (player.x + player.width > 1365) {
        player.x = 1365 - player.width;
    }
    if (player2.x < 0) {
        player2.x = 0;
    }
    if (player2.x + player2.width > 1365) {
        player2.x = 1365 - player2.width;
    }
    playerDiv.style.left = player.x + 'px';
    playerDiv.style.bottom = player.y + 'px';
    playerDiv2.style.left = player2.x + 'px';
    playerDiv2.style.bottom = player2.y + 'px';
    requestAnimationFrame(gameLoop);
}
function areTouching(player,player2) {
    if(
    player2.x < player.x + player.width &&
    player2.x + player2.width > player.x &&
    player2.y < player.y + player.height &&
    player2.y + player2.height > player.y){
        return true
    }
}
function createPlatforms() {
    platforms.forEach(platform => {
        const platformDiv = document.createElement('div');
        platformDiv.classList.add('platform');
        platformDiv.style.bottom = platform.y + 'px';
        platformDiv.style.height = platform.height + 'px';
        if (platformCount == 0) {
                platformDiv.style.backgroundImage = 'url("assets/other/cloud.png")';
                platformDiv.style.backgroundColor = 'transparent';
             
            platformDiv.style.left = '0px'
            platformDiv.style.right = '0px'
        }
        else{
                platformDiv.style.backgroundImage = 'url("assets/other/cloud.png")';
                platformDiv.style.backgroundColor = 'transparent';
                platformDiv.style.borderBottom = 'solid rgb(250, 230, 151)';
                platformDiv.style.borderRight = 'solid rgb(250, 230, 151)';
                platformDiv.style.borderLeft = 'solid rgb(250, 230, 151)';
             
            platformDiv.style.left = platform.x + 'px';
            platformDiv.style.width = platform.width + 'px'; 
        }
        if(platformCount == 14){
            platformCount = 0;
        }else{
            platformCount++
        }
        document.getElementById('gameContainer').appendChild(platformDiv);
    });
} 

window.onbeforeunload = function() {
     return "Nah don't leave";
};
gameLoop();
createPlatforms();
    </script>
</body>
</html>